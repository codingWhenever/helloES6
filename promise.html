<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <title>Promise</title>
  <script src="jquery.js" charset="utf-8"></script>
  <script>
    let func1 = new Promise(function(resolve, reject){
      $.ajax({
        url:'data/1.txt',
        dataType:'json',
        success(arr){
          resolve(arr);
        }, error(err){
          reject(err);
        }
      });
    });
    let func2 = new Promise(function(resolve, reject){
      $.ajax({
        url:'data/2.txt',
        dataType:'json',
        success(arr){
          resolve(arr);
        }, error(err){
          reject(err);
        }
      });
    });
    let func3 = new Promise(function(resolve, reject){
      $.ajax({
        url:'data/3.txt',
        dataType:'json',
        success(arr){
          resolve(arr);
        }, error(err){
          reject(err);
        }
      });
    });
    // func1.then(arr=>{
    //   alert('成功啦' + arr);
    // }, err=>{
    //   alert('sorry, 失败啦！');
    // });

    Promise.all([func1, func2, func3]).then(arr=>{
      let [r1, r2, r3]=arr;
      alert(r1);
      console.log(r2);
      alert(r3);
    }, err=>{
      alert('sorry, 失败啦！');
    });


    Promise.all([
      $.ajax({url:'data/1.txt', dataType:'json'}),
      $.ajax({url:'data/2.txt', dataType:'json'}),
      $.ajax({url:'data/3.txt', dataType:'json'}),
    ]).then(arr=>{
        let [r1, r2, r3] = arr;
        alert(r1);
        // alert(r2);
        console.log(r2);
        alert(r3);
    }, err=>{
      alert("出错啦！");
    });
  </script>
</head>
<body>

</body>
</html>
